(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{7289:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/history/[id]/edit",function(){return n(508)}])},1236:function(e,t,n){"use strict";n.d(t,{l:function(){return y}});var r=n(5893),u=n(1799),i=n(9396),a=n(3234),s=n(979),o=n(6880);function c(e){var t=e.formInput,n=e.formikProps;switch(t.type){case"multiselect":return(0,r.jsxs)(a.NI,{isInvalid:n.errors[t.key]&&n.touched[t.key],children:[(0,r.jsx)(o.ZP,(0,i.Z)((0,u.Z)({isMulti:!0},n.getFieldProps(t.key)),{onChange:function(e){n.setFieldValue(t.key,e)},options:t.options,placeholder:t.label,closeMenuOnSelect:!0})),(0,r.jsx)(a.J1,{children:n.errors[t.key]})]});case"textarea":default:return(0,r.jsxs)(a.NI,{isInvalid:n.errors[t.key]&&n.touched[t.key],children:[(0,r.jsx)(s.II,(0,i.Z)((0,u.Z)({},n.getFieldProps(t.key)),{type:t.type,placeholder:t.label,size:t.size})),(0,r.jsx)(a.J1,{children:n.errors[t.key]})]});case"select":return(0,r.jsxs)(a.NI,{isInvalid:n.errors[t.key]&&n.touched[t.key],children:[(0,r.jsx)(o.ZP,(0,i.Z)((0,u.Z)({},n.getFieldProps(t.key)),{onChange:function(e){n.setFieldValue(t.key,e)},options:t.options,placeholder:t.label,isClearable:t.isClearable,closeMenuOnSelect:!0})),(0,r.jsx)(a.J1,{children:n.errors[t.key]})]})}}var l=n(639),p=n(7741),f=n(2175),d=n(7258),m=n(9815);function h(e,t){var n=t.key,r=t.validationType,u=t.rules,i=void 0===u?[]:u;if(!d[r])return e;var a=d[r]();return i.forEach((function(e){var t,n=e.params,r=e.type;a[r]&&(a=(t=a)[r].apply(t,(0,m.Z)(n)))})),e[n]=a,e}function v(e){var t=e.isLoading,n=e.formInputs,u=e.actionButtonLabel,i=e.submitAction,a={};n.forEach((function(e){a[e.key]=e.defaultValue||""}));var s=n.reduce(h,{}),o=d.object().shape(s);return(0,r.jsx)(f.J9,{onSubmit:function(e){i(e)},validationSchema:o,validateOnBlur:!1,validateOnChange:!0,initialValues:a,children:function(e){return(0,r.jsxs)(f.l0,{autoComplete:"off",noValidate:!0,onSubmit:e.handleSubmit,children:[(0,r.jsx)(l.rj,{templateColumns:"repeat(3, 1fr)",gap:5,children:n.map((function(t,n){return(0,r.jsx)(l.P4,{w:"100%",children:(0,r.jsx)(c,{formikProps:e,formInput:t})},n)}))}),(0,r.jsx)(p.zx,{textTransform:"none",isLoading:t,type:"submit",colorScheme:"blue",mt:4,size:"md",variant:"solid",children:u||"Submit"})]})}})}function y(e){var t=e.isLoading,n=e.formInputs,u=e.actionButtonLabel,i=e.submitAction;return(0,r.jsx)(v,{isLoading:t,actionButtonLabel:u,formInputs:n,submitAction:i})}},4702:function(e,t,n){"use strict";n.d(t,{Fp:function(){return m},Nq:function(){return y},PR:function(){return h},TO:function(){return v},Zy:function(){return x},kX:function(){return k}});var r=n(7568),u=n(4051),i=n.n(u),a=n(9842),s=n(6452),o="/app/user",c="/app/user/get",l="/app/code",p="/app/user/update",f="/app/password/update",d="/app/user/remove",m=function(){return function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t((0,s.zD)(!0)),e.abrupt("return",a.ZP.get(o).then((function(e){var n=e.result;t((0,s.U2)(n))})).catch((function(e){t((0,s.zD)(!1))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){return function(){var t=(0,r.Z)(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n((0,s.zD)(!0)),t.abrupt("return",a.ZP.get(c+"/"+e).then((function(e){var t=e.result;n((0,s.Zr)(t))})).catch((function(e){n((0,s.zD)(!1))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=(0,r.Z)(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n((0,s.zD)(!0)),t.abrupt("return",a.ZP.get(l+"?token="+e).then((function(e){var t=e.result;n((0,s.Zr)(t))})).catch((function(e){n((0,s.zD)(!1))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e,t){return function(){var n=(0,r.Z)(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r((0,s.zD)(!0)),n.abrupt("return",a.ZP.put(p+"/"+e,t).then((function(e){var t=e.result;r((0,s.Vx)(t))})).catch((function(e){r((0,s.zD)(!1))})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},x=function(e,t){return function(){var n=(0,r.Z)(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r((0,s.zD)(!0)),n.abrupt("return",a.ZP.put(f+"/"+e,t).then((function(e){var t=e.result;r((0,s.Vx)(t))})).catch((function(e){r((0,s.zD)(!1))})));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k=function(e){return function(){var t=(0,r.Z)(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n((0,s.zD)(!0)),t.abrupt("return",a.ZP.delete(d+"/"+e).then((function(e){var t=e.result;n((0,s.Od)(t))})).catch((function(e){n((0,s.zD)(!1))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},508:function(e,t,n){"use strict";n.r(t),n.d(t,{EditSurvey:function(){return b}});var r=n(7568),u=n(1799),i=n(9396),a=n(4051),s=n.n(a),o=n(5893),c=n(7294),l=n(5152),p=n.n(l),f=n(5149),d=n(5500),m=n(0),h=n(1236),v=n(639),y=n(9473),x=n(4702),k=n(1163),Z=n(4607),b=function(){var e=(0,k.useRouter)().query.id,t=(0,y.I0)(),n=(0,y.v9)((function(e){return e.module})).modules,a=(0,y.v9)((function(e){return e.user})),l=a.isLoading,p=a.user;(0,c.useEffect)((function(){e&&f(e)}),[e]);var f=function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t((0,x.PR)(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=[{key:"firstName",label:"First Name",type:"text",validationType:"string",defaultValue:p&&p.firstName,rules:[{type:"required",params:["First Name  is required"]}],size:"md"},{key:"lastName",label:"Last Name",type:"text",validationType:"string",defaultValue:p&&p.lastName,rules:[{type:"required",params:["Last Name is required"]}],size:"md"},{key:"email",label:"Email",type:"email",validationType:"string",defaultValue:p&&p.email,rules:[{type:"required",params:["Email is required"]},{type:"email",params:["Invalid email"]}],size:"md"},{key:"password",label:"Password",type:"text",validationType:"string",rules:[{type:"required",params:["Password is required"]}],size:"md"},{key:"module",label:"Permissions",type:"multiselect",validationType:"array",options:n.map((function(e){return(0,i.Z)((0,u.Z)({},e),{value:e._id})})),defaultValue:p&&p.module&&p.module.map((function(e){return(0,i.Z)((0,u.Z)({},e),{value:e._id})}))||[],size:"md"}],w=function(){var n=(0,r.Z)(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t((0,x.Nq)(e,r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,o.jsxs)(v.xu,{children:[(0,o.jsx)(d.p,{title:"Users"}),(0,o.jsx)(m.Z,{title:"Edit User"}),l?(0,o.jsx)(Z.Z,{}):(0,o.jsx)(h.l,{isLoading:l,formInputs:b,submitAction:w})]})};t.default=p()((function(){return Promise.resolve((0,f.Z)(b))}),{ssr:!1})}},function(e){e.O(0,[285,954,387,345,258,212,985,774,888,179],(function(){return t=7289,e(e.s=t);var t}));var t=e.O();_N_E=t}]);